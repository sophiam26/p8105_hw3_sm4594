Data Science Homework \#3
================
Sophia Miller
10/6/2019

# Initial Set Up

# Problem 1

## Loading Instacart data

``` r
library(p8105.datasets)
data("instacart")
```

## Description of Instacart Dataset

The dataset used here is a cleaned and limited subset of the original
Instacart data. Each row in this dataset represents a single product
from an Instacart order. There are 1384617 rows and 15 columns in the
dataset. Each observation has an order identifier (`order_id`), product
identifier (`product_id`), and customer identifier (`user_id`). Key
variables include `reordered`, which indicates if the product has been
ordered by the customer in the past month, `order_dow`, which indicates
which day of the week the order was placed, `days_since_prior_order`,
which indicates the number of days since the customer’s last order, and
`product_name`, which is the name of the product ordered. For example,
the mean number of days between orders is 17, the mean hour of the day
during which products from the ice cream aisle were ordered is 14
(2:00PM), and the total number of products ordered from the “specialty
cheeses” aisle in the dataset is 3873.

## Exploratory data analysis of Instacart data

There are 134 aisles in the dataset, and the most items are ordered from
the “fresh vegetables”
aisle.

### The following plot shows the numbers of items ordered from each aisle (limited to aisles with more than 10,000 items ordered):

``` r
instacart %>% 
  group_by(aisle) %>% 
  summarize(
    n_items_ordered = n()) %>% 
  mutate(aisle = reorder(aisle, n_items_ordered)) %>% 
  filter(n_items_ordered > 10000) %>% 
  ggplot(aes(x = aisle, y = n_items_ordered)) + theme(axis.text.x = element_text(angle = 45, hjust = 1)) + geom_col() + ggtitle("Figure 1. Number of items ordered per aisle") + theme(plot.title = element_text(hjust = 0.5))
```

<img src="p8105_hw3_sm4594_files/figure-gfm/aisle_plot-1.png" width="90%" />

### The following table shows the three most popular items in the “baking ingredients”, “dog food care”, and “packaged fruits and vegetables” aisles:

``` r
instacart %>% 
  group_by(product_name, aisle) %>%
  summarize(
    n_items_ordered = n()
    ) %>% 
  group_by(aisle) %>% 
  filter(
    aisle %in% c("baking ingredients","dog food care", "packaged vegetables fruits"),
    min_rank(desc(n_items_ordered)) < 4) %>% 
  arrange(n_items_ordered, aisle) %>% 
  knitr::kable(format = 'pandoc', caption = "Table 1. Most popular items by aisle")
```

| product\_name                                 | aisle                      | n\_items\_ordered |
| :-------------------------------------------- | :------------------------- | ----------------: |
| Small Dog Biscuits                            | dog food care              |                26 |
| Organix Chicken & Brown Rice Recipe           | dog food care              |                28 |
| Snack Sticks Chicken & Rice Recipe Dog Treats | dog food care              |                30 |
| Cane Sugar                                    | baking ingredients         |               336 |
| Pure Baking Soda                              | baking ingredients         |               387 |
| Light Brown Sugar                             | baking ingredients         |               499 |
| Organic Blueberries                           | packaged vegetables fruits |              4966 |
| Organic Raspberries                           | packaged vegetables fruits |              5546 |
| Organic Baby Spinach                          | packaged vegetables fruits |              9784 |

Table 1. Most popular items by
aisle

### The following table shows the mean time of day that pink lady apples and coffee ice cream were ordered on each day of the week:

``` r
instacart %>% 
  filter(product_name %in% c("Pink Lady Apples", "Coffee Ice Cream")) %>% 
  mutate(order_dow = as.factor(order_dow)) %>% 
  arrange(order_dow) %>% 
  mutate(Day = recode(order_dow, '0' = "Sunday", '1' = "Monday", '2' = "Tuesday", '3' = "Wednesday", '4' = "Thursday", '5' = "Friday", '6' = "Saturday")) %>% 
  group_by(product_name, Day) %>% 
  summarize(mean_hour = mean(order_hour_of_day)) %>% 
  pivot_wider(
    names_from = product_name,
    values_from = mean_hour) %>% 
  knitr::kable(format = 'pandoc', caption = "Table 2. Mean hour of day of item order, by day of week", digits = 0)
```

| Day       | Coffee Ice Cream | Pink Lady Apples |
| :-------- | ---------------: | ---------------: |
| Sunday    |               14 |               13 |
| Monday    |               14 |               11 |
| Tuesday   |               15 |               12 |
| Wednesday |               15 |               14 |
| Thursday  |               15 |               12 |
| Friday    |               12 |               13 |
| Saturday  |               14 |               12 |

Table 2. Mean hour of day of item order, by day of week

``` r
## convert hour to time variable
```

# Problem 2
